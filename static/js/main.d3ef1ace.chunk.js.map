{"version":3,"sources":["components/SearchForm/SearchForm.jsx","components/Modal.jsx","components/Togglable.jsx","components/Gallery/GalleryItem/GalleryItem.jsx","components/Gallery/Gallery.jsx","components/App.jsx","index.js","components/Gallery/GalleryItem/GalleryItem.module.css","components/Modal.module.css"],"names":["SearchForm","state","query","onChange","e","_this","setState","target","value","onSubmit","preventDefault","props","this","react_default","a","createElement","className","type","autoComplete","placeholder","React","Component","Modal","handleBackdropClick","onClose","tagName","handleKeyPress","code","window","addEventListener","removeEventListener","children","onClick","css","backdrop","aria-hidden","Togglable","isToggle","handleToggle","GalleryItem","_ref","thumb","largeImage","likes","views","comments","downloads","galleryItem","LazyLoad_default","debounce","height","img","src","alt","stats","statsItem","components_Togglable","_ref2","Fragment","fullscreenButton","components_Modal","Gallery","items","length","map","item","Gallery_GalleryItem_GalleryItem","Object","assign","key","id","defaultProps","KEY","mapDataToNorm","data","webformatURL","largeImageURL","App","isLoading","error","page","fetchData","url","axios","then","concat","toConsumableArray","hits","catch","finally","loadMore","prevProps","prevState","_this$state","arguments","undefined","getUrl","_document$body","document","body","offsetHeight","scrollY","scrollHeight","scrollBy","top","behavior","_this$state2","components_SearchForm_SearchForm","Loader","active","inline","components_Gallery_Gallery","disabled","ReactDOM","render","components_App","getElementById","module","exports"],"mappings":"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","file":"static/js/main.d3ef1ace.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass SearchForm extends React.Component {\n  state = {\n    query: '',\n  };\n\n  onChange = e => this.setState({ query: e.target.value });\n\n  onSubmit = e => {\n    e.preventDefault();\n    const { onSubmit } = this.props;\n    const { query } = this.state;\n    onSubmit(query);\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <div>\n        <form onSubmit={this.onSubmit} className=\"search-form\">\n          <input\n            type=\"text\"\n            autoComplete=\"off\"\n            placeholder=\"Search images...\"\n            value={query}\n            onChange={this.onChange}\n          />\n        </form>\n      </div>\n    );\n  }\n}\nSearchForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\nexport default SearchForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport css from './Modal.module.css';\n\nclass Modal extends React.Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleBackdropClick = e => {\n    const { onClose } = this.props;\n\n    if (e.target.tagName !== 'IMG') {\n      onClose();\n    }\n  };\n\n  handleKeyPress = e => {\n    const { onClose } = this.props;\n    if (e.code !== 'Escape') return;\n    onClose();\n  };\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <div\n        onClick={this.handleBackdropClick}\n        className={css.backdrop}\n        aria-hidden=\"true\"\n      >\n        {children}\n      </div>\n    );\n  }\n}\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n};\nexport default Modal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Togglable extends React.Component {\n  state = {\n    isToggle: false,\n  };\n\n  handleToggle = () => this.setState(state => ({ isToggle: !state.isToggle }));\n\n  render() {\n    const { children } = this.props;\n    const { isToggle } = this.state;\n    return children({\n      isToggle,\n      handleToggle: this.handleToggle,\n    });\n  }\n}\nTogglable.propTypes = {\n  children: PropTypes.func.isRequired,\n};\nexport default Togglable;\n","import React from 'react';\nimport LazyLoad from 'react-lazy-load';\nimport PropTypes from 'prop-types';\nimport Modal from '../../Modal';\nimport css from './GalleryItem.module.css';\nimport Togglable from '../../Togglable';\n\nconst GalleryItem = ({\n  thumb,\n  largeImage,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return (\n    <div className={css.galleryItem}>\n      <LazyLoad debounce={false} height={260}>\n        <img className={css.img} src={thumb} alt=\"\" />\n      </LazyLoad>\n\n      <div className={css.stats}>\n        <p className={css.statsItem}>\n          <i className=\"material-icons\">thumb_up</i>\n          {likes}\n        </p>\n        <p className={css.statsItem}>\n          <i className=\"material-icons\">visibility</i>\n          {views}\n        </p>\n        <p className={css.statsItem}>\n          <i className=\"material-icons\">comment</i>\n          {comments}\n        </p>\n        <p className={css.statsItem}>\n          <i className=\"material-icons\">cloud_download</i>\n          {downloads}\n        </p>\n      </div>\n      <Togglable>\n        {({ isToggle, handleToggle }) => (\n          <>\n            <button\n              type=\"button\"\n              className={css.fullscreenButton}\n              onClick={handleToggle}\n            >\n              <i className=\"material-icons\">zoom_out_map</i>\n            </button>\n            {isToggle && (\n              <Modal onClose={handleToggle}>\n                <LazyLoad>\n                  <img src={largeImage} alt=\"\" />\n                </LazyLoad>\n              </Modal>\n            )}\n          </>\n        )}\n      </Togglable>\n    </div>\n  );\n};\n\nGalleryItem.propTypes = {\n  thumb: PropTypes.string.isRequired,\n  largeImage: PropTypes.string.isRequired,\n  likes: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  views: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  comments: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  downloads: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n};\nexport default GalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GalleryItem from './GalleryItem/GalleryItem';\n\nconst Gallery = ({ items }) => {\n  return items.length > 0 ? (\n    <div className=\"gallery\">\n      {items.map(item => (\n        <GalleryItem key={item.id} {...item} />\n      ))}\n    </div>\n  ) : (\n    <p>No images</p>\n  );\n};\nGallery.defaultProps = {\n  items: [],\n};\nGallery.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.object),\n};\nexport default Gallery;\n","import React from 'react';\nimport * as axios from 'axios';\nimport { Loader } from 'semantic-ui-react';\nimport SearchForm from './SearchForm/SearchForm';\n\nimport Gallery from './Gallery/Gallery';\n\nconst KEY = '12509636-53caf59f5bb94c5e817c60f6e';\n\nfunction getUrl(query, page = 1) {\n  return `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=20&key=${KEY}`;\n}\nfunction mapDataToNorm(data) {\n  return data.map(item => ({\n    id: item.id,\n    thumb: item.webformatURL,\n    largeImage: item.largeImageURL,\n    likes: item.likes,\n    views: item.views,\n    comments: item.comments,\n    downloads: item.downloads,\n  }));\n}\nclass App extends React.Component {\n  state = {\n    items: [],\n    isLoading: false,\n    error: null,\n    page: 1,\n    query: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { items, page, query } = this.state;\n    if (page !== prevState.page || query !== prevState.query) {\n      const url = getUrl(query, page);\n      if (page === 1) {\n        this.fetchData(url, []);\n      } else {\n        this.fetchData(url, items).then(() => {\n          const { offsetHeight, scrollHeight } = document.body;\n          const scrollY = scrollHeight - offsetHeight;\n\n          window.scrollBy({ top: scrollY, behavior: 'smooth' });\n        });\n      }\n    }\n  }\n\n  onSubmit = query => {\n    this.setState({\n      page: 1,\n      query,\n    });\n  };\n\n  fetchData = (url, items) => {\n    this.setState({ isLoading: true });\n    return axios\n      .get(url)\n      .then(data => {\n        this.setState({ items: [...items, ...mapDataToNorm(data.data.hits)] });\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  loadMore = e => {\n    e.preventDefault();\n    this.setState(state => ({ page: state.page + 1 }));\n  };\n\n  render() {\n    const { items, error, isLoading } = this.state;\n    return (\n      <div>\n        <SearchForm onSubmit={this.onSubmit} />\n        <Loader active={isLoading} inline=\"centered\" />\n        <Gallery items={items} />\n        {items.length > 0 && (\n          <button\n            type=\"button\"\n            onClick={this.loadMore}\n            className=\"button\"\n            disabled={error !== null}\n          >\n            Load more\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"galleryItem\":\"GalleryItem_galleryItem__2-SKW\",\"img\":\"GalleryItem_img__1hel6\",\"stats\":\"GalleryItem_stats__3UaTb\",\"statsItem\":\"GalleryItem_statsItem__2r0nT\",\"fullscreenButton\":\"GalleryItem_fullscreenButton__Crqai\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__2EYcB\"};"],"sourceRoot":""}